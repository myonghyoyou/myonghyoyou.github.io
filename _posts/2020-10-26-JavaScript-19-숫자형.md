---
title: JavaScript (19) 숫자형
tags: JavaScript
article_header:
  type: cover
  image:

---

### 개요

모던 자바스크립트는 숫자를 나타내는 두 가지 자료형을 지원한다.

1. 일반적인 숫자는 '배정밀도 부동소수점 숫자(double precision floating point number)'로 알려진 64비트 형식의 IEEE-754에 저장된다.

2. 임의의 길이를 가진 정수는 BigInt 숫자로 나타낼 수 있다. 일반적인 숫자는 253이상이거나 -253이하일 수 없다는 제약 때문에 BigInt라는 새로운 자료형이 만들어졌다. BigInt는 아주 특별한 경우에만 사용된다.

---

### 숫자를 입력하는 다양한 방법

10억을 입력하는 가장 분명한 방법은 아래와 같이 직접 10억을 써주는 것이다.

``` javascript
let billion = 1000000000;
```

그런데 위와 같이 0을 많이 사용하는 방법은 잘 사용하지 않는다. 잘못 입력하기 쉽기 때문이다.

그래서 대개 10억(`billion`)을 나타낼 땐 `'1bn'`을 사용하고, 73억을 나타날 땐 `7.3bn`을 사용한다.

자바스크립트에서도 숫자 옆에 `e`를 붙이고 0의 개수를 그 옆에 붙여주면 숫자를 줄일 수 있다.

``` javascript
let billion = 1e9;  // 10억, 1과 9개의 0

alert( 7.3e9 );  // 73억 (7,300,000,000)
```

`'e'`는 e 왼쪽의 수에 e 오른쪽에 있는 수만큼 10의 거듭제곱을 한다.

``` javascript
1e3 = 1 * 1000
1.23e6 = 1.23 * 1000000
```

아주 작은 숫자인 1마이크로초(백만 분의 1초)를 표현할 때도 0을 많이 써야한다.

``` javascript
let ms = 0.000001;
```

작은 숫자를 표현할 때도 큰 숫자를 표현할 때처럼 `'e'`를 사용할 수 있다.

``` javascript
let ms = 1e-6; // 1에서 왼쪽으로 6번 소수점 이동
```

위의 예시와 같이 `'e'` 우측에 음수가 있으면, 이 음수의 절대값 만큼 10을 거듭제곱한 수로 나누는 것을 의미한다.

---

### 16진수, 2진수, 8진수

16진수는 `0x`를 사용해 표현할 수 있다.

예시:

``` javascript
alert( 0xff ); // 255
alert( 0xFF ); // 255 (대·소문자를 가리지 않으므로 둘 다 같은 값을 나타냄.)
```

2진수와 8진수는 아주 드물게 쓰이지만, 접두사 `0b`와 `0o`를 사용해 간단히 나타낼 수 있다.

``` javascript
let a = 0b11111111; // 255의 2진수
let b = 0o377; // 255의 8진수

alert( a == b ); // true, 진법은 다르지만, a와 b는 같은 수임
```

자바스크립트에서 지원하는 진법은 위의 3개로, 이 외의 진법을 사용하기 위해선 `parseInt`를 사용해야 한다.

---

### toString(base)

`num.toString(base)` 메서드는 `base`진법으로 `num`을 표현한 뒤, 이를 문자형을 변환해 반환한다.

``` javascript
let num = 255;

alert( num.toString(16) );  // ff
alert( num.toString(2) );   // 11111111
```

`base`는 `2`에서 `36`까지 쓸 수 있고, 기본값은 `10`이다.

`base`별 유스 케이스는 다음과 같다.

* **base=16** : 16진수 색, 문자 인코딩을 표할 때 사용. 숫자는 `0`부터 `9`, 10 이상의 수는 `A`부터 `F`를 사용하여 나타낸다.
* **base=2** : 비트 연산 디버깅에 주로 사용. 숫자는 `0` 또는 `1`이 된다.
* **base=36** : 사용할 수 있는 최대 `base`값으로 `0..9`와 `A..Z`를 사용해 숫자를 표현. url을 줄이는 것과 같이 숫자로 된 긴 식별자를 짧게 줄일 때 유용하다.

``` javascript 
alert( 123456..toString(36) ); // 2n9c
```

> 점 두 개와 메서드 호출
>
> > `123456..toString(36)`처럼 숫자를 대상으로 메서드 `toString`을 직접 호출하려면 숫자 다음에 점 두 개 `..`를 붙여야 한다. 점을 한 개만 사용하면, 첫 번째 점 이후로 소수부로 인식되어 에러가 발생하기 때문이다.
> >
> > (123456).toString(36) 또한 가능하다.

---

### 어림수 구하기

아래는 대표적인 어림수 관련 내장 함수들이다.

**`Math Floor`**

소수점 첫째 자리에서 내림(버림). `3.1`은 `3`, `-1.1`은 `-1`이 된다.

**`Math.Ceil`**

소수점 첫째 자리에서 올림. `3.1`은 `4`, `-1.1`은 `-1`이 된다.

**`Math.round`**

소수점 첫째 자리에서 반올림. `3.1`은 `3`, `3.6`은 `4`, `-1.1`은 `-1`이 된다.

**`Math.trunc` (Internet Explorer에서는 지원하지 않음)**

소수부를 무시. `3.1`은 `3`이 되고 `-1.1`은 `-1`이 된다.

위의 내장 함수들만으로도 소수부에 관련된 연산 대부분을 처리할 수 있다. 그러나 소수점 `n-th`번째 수를 기준으로 어림수를 구하려고 할 때는 다른 방법을 써야한다.

1. 곱하기와 나누기

   소수점 두 번째 자리 숫자까지만 남기고 싶은 경우, 숫자에 `100` 또는 `100`보다 큰 `10`의 거듭제곱 수를 곱한 후, 원하는 어림수 내장 함수를 호출하고 처음 곱한 수를 다시 나눈다.

   ``` javascript
   let num = 1.23456;
   
   alert( Math.floor(num * 100) / 100 ); // 1.23456 -> 123.456 -> 123 -> 1.23
   ```

2. 소수점 `n`번째 수까지의 어림수를 구한 후 이를 문자형으로 반환해주는 `toFixed(n)` 메서드를 사용한다. `toFixed(n)`은 가장 가까운 값으로 올림 혹은 내림해준다.

   ``` javascript
   let num = 12.34;
   alert( num.toFixed(1) ); // "12.3"
   ```

   `toFixed`를 사용하여 나오는 반환 값은 문자열이며 소수부의 길이가 인수보다 작으면 끝에 0이 추가된다.

   ``` javascript
   let num = 12.34;
   alert( num.toFixed(5) ); // "12.34000", 소수부의 길이를 5로 만들기 위해 0이 추가됨.
   ```

---

### 부정확한 계산

숫자는 내부적으로 64비트 형식으로 표현되기 때문에 숫자를 저장하려면 정확히 64비트가 필요하다.

64비트 중 52비트는 숫자를 저장하는 데에, 11비트는 소수점 위치, 1비트는 부호를 저장하는 데 사용된다.

그런데 숫자가 너무 커지면 64비트를 넘어서 Infinity로 처리된다.

``` javascript
alert( 1e500 ); // Infinity
```

이러한 원인 중 하나는 정밀도 손실(loss of precision)으로 관련한 예시를 살펴보자.

``` javascript
alert( 0.1 + 0.2 == 0.3 ); // false
```

`0.1`과 `0.2`의 합은 `0.3`이 맞음에도 불구하고 `false`가 출력되는 것을 볼 수 있다.

`0.1`과 `0.3`의 합을 확인해보니 다음과 같다.

``` javascript
alert( 0.1 + 0.2 ); // 0.30000000000000004
```

숫자는 0과 1로 이루어진 이진수로 변환되어 연속된 메모리 공간에 저장된다. 그런데 10진법을 사용하면 쉽게 표현할 수 있는 `0.1`, `0.2` 같은 분수는 이진법으로 표현하면 무한 소수가 된다.

10진법에서 1/3을 정확히 나타낼 수 없듯이, 2진법을 사용해 *0.1* 또는 *0.2*를 **정확하게** 저장하는 방법은 없다.

IEEE-754(디폴트 숫자 형식)에선 가능한 가장 가까운 숫자로 반올림하는 방법을 사용해 이런 문제를 해결힌다. 그러나 반올림 규칙을 적용하면 발생하는 '작은 정밀도 손실’은 우리 눈에 보이지는 않지만 실제로는 발생한다.

아래와 같이 코드를 작성하면 정밀도 손실을 목격할 수 있다.

``` javascript
alert( 0.1.toFixed(20) ); // 0.10000000000000000555
```

`0.1`과 `0.2`를 더하면 정확히 `0.3`이 아닌 이유가 여기에 있다.

이러한 문제를 해결하기 위해서는 `toFixed(n)` 메서드를 통해 어림수를 만드는 것이다.

``` javascript
let sum = 0.1 + 0.2;
alert( sum.toFixed(2) ); // 0.30
```

이 때 `toFixed`는 항상 문자열을 반환하기에 숫자형으로 변환하길 원한다면 단항 덧셈 연산자를 사용하면 된다.

``` javascript
let sum = 0.1 + 0.2;
alert( +sum.toFixed(2) ); // 0.3
```

---

### isNaN과 isFinite

* `Infinity` & `-Infinity` : 그 어떤 숫자보다 크거나 혹은 작은 특수 숫자 값
* `NaN` : 에러를 나타내는 값

두 특수 숫자는 `숫자형`에 속하지만 정상적인 숫자는 아이기에, 정상적인 숫자와 구분하기 위한 특별한 함수가 존재한다.

* `isNaN(value)` : 인수를 숫자로 변환한 다음 `NaN`인지  테스트함

  ``` javascript
  alert( isNaN(NaN) ); // true
  alert( isNaN("str") ); // true
  ```

  `=== NaN`을 통한 비교를 하지 않고 `isNaN`을 쓰는 이유는 `NaN`이 `NaN` 자기 자신을 포함하여 그 어떤 값과도 같지 않기 때문이다.

  ``` javascript
  alert( NaN === NaN ); // false
  ```

* `isInfinite(value)` : 인수를 숫자로 변환하고 변환한 숫자가 `NaN/Infinity/-Infinity`가 아닌 일반 숫자인 경우 `true`를 반환

  ``` javascript
  alert( isFinite("15") ); // true
  alert( isFinite("str") ); // false, NaN이라서.
  alert( isFinite(Infinity) ); // false, Infinity라서.
  ```

`isInfinite`은 문자열이 일반 숫자인지 검증하는 데 사용되기도 한다.

``` javascript
let num = +prompt("숫자를 입력하세요.", '');

// 숫자가 아닌 값을 입력하거나 Infinity, -Infinity를 입력하면 false가 출력된다.
alert( isFinite(num) );
```

> 빈 문자열이나 공백만 있는 문자열은 `isFinite`를 포함한 모든 숫자 관련 내장 함수에서 `0`으로 취급된다

---

### parseInt와 parseFloat

단항 덧셈 연산자 `+` 또는 Number()를 이용하여 숫자형으로 변형할 때 피연산자가 숫자가 아니면 형 변환에 실패한다.

``` javascript
alert( +"100px" ); // NaN
```

`'100px'`, `'12pt'`와 같이 숫자와 단위를 함께 쓰는 경우가 CSS에서 종종 발생하고 금액 뒤에 통화 기호를 붙여 표현하기도 함.

이럴 때 쓰기 위해 `parseInt`와 `parseFloat`가 존재한다.

두 함수는 불가능할 때까지 문자열에서 숫자를 읽는다. 숫자를 읽는 도중 오류가 발생하면 이미 수집된 숫자를 반환한다.

``` javascript
alert( parseInt('100px') ); // 100
alert( parseFloat('12.5em') ); // 12.5

alert( parseInt('12.3') ); // 12, 정수 부분만 반환.
alert( parseFloat('12.3.4') ); // 12.3, 두 번째 점에서 숫자 읽기를 멈춤.
```

읽을 수 있는 숫자가 없으면 `NaN`을 반환한다.

---

### 기타 수학 함수

**`Math.random()`**

0과 1 사이의 난수를 반환한다. (1은 제외)

**`Math.max(a, b, c...) / Math.min(a, b, c...)`**

인수 중 최소/최대값을 반환한다.

``` javascript
alert( Math.max(3, 5, -10, 0, 1) ); // 5
alert( Math.min(1, 2) ); // 1
```

**`math.pow(n, power)`**

`n`을 power번 거듭제곱한 값을 반환한다.

``` javascript
alert( Math.pow(2, 10) ); // 2의 10제곱 = 1024
```

---

참조 : <br>

* https://ko.javascript.info/number#tasks
