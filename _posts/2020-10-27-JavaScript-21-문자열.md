---
title: JavaScript (21) 배열
tags: JavaScript
article_header:
  type: cover
  image:


---

### 개요

개발을 진행하다 보면 첫 번째 요소, 두 번째 요소, 세 번째 요소 등과 같이 *순서가 있는 컬렉션*이 필요할 때가 생긴다. 

이럴 때 객체를 사용하면 순서와 관련된 메서드가 없어 불편하다. 객체는 순서를 고려하지 않고 만들어진 자료구조라 새로운 프로퍼티를 기존 프로퍼티 사이에 끼워 넣는 것도 불가능하다.

순서가 있는 컬렉션을 저장할 때 쓰는 자료구조인 `배열`을 이 때 사용할 수 있다.

---

## pop·push와 shift·unshift

큐(queue)는 배열을 사용해 만들 수 있는 대표적인 자료구조. 배열과 같이 순서가 있는 컬렉션을 저장하는 데 사용한다. 

아래는 큐에서 사용하는 주요 연산이다.

* `push` : 맨 끝에 요소를  추가한다.
* `shift` : 제일 앞 요소를 꺼낸 제거한 후 남아있는 요소를 앞으로 밀어준다. 두 번째 요소가 첫번째 요소가 된다.

배열에는 위의 두 연산을 가능하게 해주는 내장 메서드 `push`와 `pop`이 있다.

배열은 큐 이외에 스택(stack)이라 불리는 자료구조를 구현할 때도 쓰인다.

아래는 스택에서 사용하는 주요 연산이다.

* `push` : 요소를 스택 끝에 집어넣는다.
* `pop` : 스택 끝 요소를 추출한다.

스택은 카드 한벌 이 쌓여있는 것을 생각하면 되며 후입선출(Last-In-First-Out, LIFO) 구조이다. 큐는 선입선출(First-In-First-Out, FIFO) 구조이다.

**아래는 배열 끝에 무언가를 해주는 메서드들이다.**

**`pop`**

배열 끝 요소를 제거하고, 제거한 요소를 반환한다.

``` javascript
let fruits = ["사과", "오렌지", "배"];

alert( fruits.pop() ); // 배

alert( fruits ); // 사과,오렌지
```

**`push`**

배열 끝에 요소를 추가한다.

``` javascript
let fruits = ["사과", "오렌지"];

fruits.push("배");

alert( fruits ); // 사과,오렌지,배
```

**아래는 배열 앞에 무언가를 해주는 메서드들이다.**

**`shift`**

배열 앞 요소를 제거하고, 제거한 요소를 반환한다.

``` javascript
let fruits = ["사과", "오렌지", "배"];

alert( fruits.shift() ); // 사과

alert( fruits ); // 오렌지,배
```

**`unshift`**

배열 앞에 요소를 추가한다.

``` javascript
let fruits = ["오렌지", "배"];

fruits.unshift('사과');

alert( fruits ); // 사과,오렌지,배
```

`push`와 `unshift`는 요소 여러 개를 한번에 더해줄 수 있다.

``` javascript
let fruits = ["사과"];

fruits.push("오렌지", "배");
fruits.unshift("파인애플", "레몬");

// ["파인애플", "레몬", "사과", "오렌지", "배"]
alert( fruits );
```

---

### 배열의 내부 동작 원리

> 배열 == 특별한 종류의 객체

`arr[0]`처럼 대괄호를 사용해 접근하는 방식은 객체 문법에서 왔지만 배열은 키가 숫자라는 점에서 다르다.

배열은 객체의 기본 기능 외에도 컬렉션을 제어하는 특별한 메서드를 지닌다. 또한 `length` 프로퍼티도 제공한다. **그러나 배열의 본질은 객체이다.**

때문에 배열은 객체와 마찬가지로 참조를 통해 복사된다.

``` javascript
let fruits = ["바나나"]

let arr = fruits; // 참조를 복사함(두 변수가 같은 객체를 참조)

alert( arr === fruits ); // true

arr.push("배"); // 참조를 이용해 배열을 수정

alert( fruits ); // 바나나,배 - 요소가 두 개가 됨
```

배열은 배열만의 특수 내부 표현방식이 존재한다. 또한 배열 관련 연산을 더 빠르게 해주는 최적화 기법도 다양하게 있다.

때문에 개발자가 배열을 '순서가 있는 자료의 컬렉션'으로써 다루지 않고 일반 객체처럼 다루면 최적화 기법이 작동하지 않아 배열 특유의 이점이 사라진다.

---

### 성능

`push`와 `pop`은 빠르지만 `shift`와 `unshift`는 느리다.

`shift` 메서드를 호출하게 되면 인덱스가 `0`인 요소를 지우는 것 뿐만 아니라 나머지 요소들의 인덱스를 수정해주어야 한다.

때문에 배열에 요소가 많으면 요소가 이동하는 데 걸리는 시간이 길어지고 메모리 관련 연산도 많아진다.

`unshift`를 실행했을 때도 유사한 일이 발생한다.

그러나 `pop`과 `push` 메서드는 마지막 요소를 제거하고 `length` 프로퍼티의 값만 줄여주면 되기 때문에 실행 속도가 빠르다.

---

### 반복문

* `for`문을 통한 배열 순회

  ``` javascript
  let arr = ["사과", "오렌지", "배"];
  
  for (let i = 0; i < arr.length; i++) {
    alert( arr[i] );
  }
  ```

* `for..of`를 통한 배열 순회

  ``` javascript
  let fruits = ["사과", "오렌지", "자두"];
  
  // 배열 요소를 대상으로 반복 작업을 수행합니다.
  for (let fruit of fruits) {
    alert( fruit );
  }
  ```

  `for...of`를 사용하면 현재 요소의 인덱스는 얻을 수 없고 값만 얻을 수 있다.

  배열은 객체형에 속하기 때문에 `for..in`을 쓰는 것도 가능하다.

* `for..in`을 통한 배열 순회

  ``` javascript
  let arr = ["사과", "오렌지", "배"];
  
  for (let key in arr) {
    alert( arr[key] ); // 사과, 오렌지, 배
  }
  ```

  그러나 `for..in`은 프로퍼티를 순회 대상에 포함시키며 10-100배 정도 느리기에 되도록 쓰지 않는 것이 좋다.

---

### new Array()

 `new Array()` 문법을 사용해도 배열을 만들 수 있다.

``` javascript
let arr = new Array("사과", "배", "기타");
```

숫자형 인수 하나를 넣어서 `new Array`를 호출하면 배열이 만들어지는데, 이 배열엔 요소는 없는 반면 길이는 인수와 같아진다.

``` javascript
let arr = new Array(2);

alert( arr[0] ); // undefined가 출력. 배열 내에 요소가 하나도 없음.

alert( arr.length ); // 길이는 2
```

위와 같은 특징은 개발자에게 실수를 유발할 수 있기에 대개 대괄호를 써서 배열을 만든다.

---

### 다차원 배열

배열은 배열의 요소가 될 수 있다. 이를 다차원 배열이라 부르며 행렬을 저장하는 용도로 쓰인다.

``` javascript
let matrix = [
  [1, 2, 3],
  [4, 5, 6],
  [7, 8, 9]
];

alert( matrix[1][1] ); // 5, 중심에 있는 요소
```

---

###  toString

배열의 `toString` 메서드는 요소를 쉼표로 구분한 문자열을 반환한다.

``` javascript
let arr = [1, 2, 3];

alert( arr ); // 1,2,3
alert( toString(arr) === '1,2,3' ); // true
```


---

참조 : <br>

* https://ko.javascript.info/array
